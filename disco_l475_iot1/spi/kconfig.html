

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>KConfig &mdash; Zephyr Driver Documentation 0.0.1 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/blue_highlight.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Return Codes" href="return_codes.html" />
    <link rel="prev" title="Frequency Selection" href="frequency_selection.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Zephyr Driver Documentation
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../issues.html">Issue Reporting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../particle_argon/index.html">Particle Argon</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Disco L475 IOT1</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">SPI</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="frequency_selection.html">Frequency Selection</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">KConfig</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="return_codes.html">Return Codes</a></li>
<li class="toctree-l3"><a class="reference internal" href="slave_mode.html">Slave mode</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../change_main_clock.html">Change Main Clock</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../general/index.html">General</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Zephyr Driver Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Disco L475 IOT1</a> &raquo;</li>
        
          <li><a href="index.html">SPI</a> &raquo;</li>
        
      <li>KConfig</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="kconfig">
<h1>KConfig<a class="headerlink" href="#kconfig" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<p>Below is the KConfig configurations that I have encountered through developement with the STM32 SPI driver, these should go into your <code class="docutils literal notranslate"><span class="pre">prj.conf</span></code> file</p>
<dl class="glossary simple">
<dt id="term-CONFIG_SPI">CONFIG_SPI<a class="headerlink" href="#term-CONFIG_SPI" title="Permalink to this term">¶</a></dt><dd><p>This is required to be set to enable any usage of the SPI drivers</p>
</dd>
<dt id="term-CONFIG_SPI_SLAVE">CONFIG_SPI_SLAVE<a class="headerlink" href="#term-CONFIG_SPI_SLAVE" title="Permalink to this term">¶</a></dt><dd><p>This enables the SLAVE parts of the SPI driver, this is not necessarily needed if SLAVE is required. It may seem from the name that it is pivotal
in performance of the driver, but the STM32 SPI driver as well as the generic context file <code class="docutils literal notranslate"><span class="pre">spi_context.h</span></code> only use it to return the number of
bytes successfully transmitted/received. So if you don’t need to know how much you sent/received you can ignore this config for THIS driver, but
not necessarily other board drivers.</p>
</dd>
<dt id="term-CONFIG_SPI_STM32_USE_HW_SS">CONFIG_SPI_STM32_USE_HW_SS<a class="headerlink" href="#term-CONFIG_SPI_STM32_USE_HW_SS" title="Permalink to this term">¶</a></dt><dd><p>This tells the STM32 to use the hardware NSS pin on chip (CS is handled in hardware), this is ENABLED by default. If possible the hardware NSS pin
should be used in SLAVE mode, this is because it handles synchronization reasonably well, and if you unfortunately enable a ‘software’ CS pin using
<code class="docutils literal notranslate"><span class="pre">spi_config.cs</span></code> the STM32 driver will automatically ignore this parameter and use that CS pin as if it were the bus MASTER (i.e. asserts and deasserts
the CS line ACTIVELY) even if you have it in SLAVE mode, this could lead to the possibility of shorted between power rails if the actually MASTER ACTIVELY
connects the CS pin to VCC and the STM32 connects it to GND.</p>
</dd>
<dt id="term-CONFIG_SPI_STM32_INTERRUPT">CONFIG_SPI_STM32_INTERRUPT<a class="headerlink" href="#term-CONFIG_SPI_STM32_INTERRUPT" title="Permalink to this term">¶</a></dt><dd><p>This tells the driver to use the interrupt for SPI to send/receive data, this is ENABLED by default. This allows other threads to performs actions whilst
the SPI peripheral is sending data, when this is disabled the call to send/receive data will block whilst waiting for transmition of data to conclude.</p>
</dd>
</dl>
<p>This is by no means a complete list/explanation of the KConfig defines for the STM32 SPI driver, others will be added here when encountered, they will not be
actively seeked out.</p>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="return_codes.html" class="btn btn-neutral float-right" title="Return Codes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="frequency_selection.html" class="btn btn-neutral float-left" title="Frequency Selection" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, awkwardMathNerd.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>